<!--
Copyright (C) Villanova University 2013.

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License version 2,
as published by the Free Software Foundation.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA  02111-1307  USA
-->
<xhtml:html lang="en"
            xmlns:xhtml="http://www.w3.org/1999/xhtml"
            xmlns:xforms="http://www.w3.org/2002/xforms"
            xmlns:xxforms="http://orbeon.org/oxf/xml/xforms"
            xmlns:ev="http://www.w3.org/2001/xml-events"
            xmlns:xs="http://www.w3.org/2001/XMLSchema"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
            xmlns:fr="http://orbeon.org/oxf/xml/form-runner"
            xmlns:xi="http://www.w3.org/2001/XInclude"
            xmlns:xxi="http://orbeon.org/oxf/xml/xinclude"
            xmlns:foxml="info:fedora/fedora-system:def/foxml#"
            xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
            xmlns:sparql="http://www.w3.org/2001/sw/DataAccess/rf1/result"
            xmlns:fedora-model="info:fedora/fedora-system:def/model#"
            xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
            xmlns:rel="info:fedora/fedora-system:def/relations-external#"
            xmlns:dc="http://purl.org/dc/elements/1.1/"
            xmlns:management="http://www.fedora.info/definitions/1/0/management/"
            xmlns:METS="http://www.loc.gov/METS/"
            xmlns:composite-model="info:fedora/fedora-system:def/dsCompositeModel#"
            xmlns:access="http://www.fedora.info/definitions/1/0/access/">
  <xhtml:head>
    <xhtml:meta charset="utf-8"/>
    
    <xhtml:meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <xhtml:meta name="description" content=""/>
    <xhtml:meta name="author" content=""/>

    
    
    <xhtml:script type="text/javascript">

        <![CDATA[
            TINYMCE_CUSTOM_CONFIG = {
                mode: "exact",
                language: "en",
                theme: "advanced",
                skin: "thebigreason",
                popup_css: "/orbeon/xbl/orbeon/tinymce/jscripts/tiny_mce/themes/advanced/skins/default/dialog.css",
                plugins: "advlink,spellchecker,style,table,save,iespell,preview,media,searchreplace,print,paste,visualchars,nonbreaking,xhtmlxtras,template,inlinepopups",
                theme_advanced_buttons1: "formatselect,bold,italic,|,bullist,numlist,|,outdent,indent,|,undo,redo,undo,redo,|,link,unlink,anchor,|,pasteword,cleanup,code,|,help",
                theme_advanced_buttons2: "",
                theme_advanced_buttons3: "",
                theme_advanced_buttons4: "",
                theme_advanced_toolbar_location: "top",
                theme_advanced_toolbar_align: "left",
                theme_advanced_statusbar_location: "bottom",
                theme_advanced_resizing: true,
                gecko_spellcheck: true,
                doctype: '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">',
                encoding: "xml",
                entity_encoding: "raw",
                forced_root_block: 'div',
                remove_redundant_brs: true,
                verify_html: true
            };
        ]]>
    </xhtml:script>
    
    <!--
    <xhtml:script>



    </xhtml:script>
    -->
    
    
    <!-- -->
    <xhtml:link href="/apps/VuDL/css/orbeon_overrides.css"   rel="stylesheet" type="text/css" media="screen" />
    <xhtml:link href="/apps/VuDL/css/bootstrap_overrides.css"   rel="stylesheet" type="text/css" media="screen" />
    
    
    
    <!-- load config-model (System info, debug settings) -->
    <xi:include href="oxf:/apps/VuDL/conf/config.xml"/>

    <!-- PageModel contains currentPage and currentPID -->
    <xi:include href="input:PageModel"/>
    
    <!-- -->
    <xi:include href="oxf:/apps/VuDL/model/BaseModel.xml"/>
    <xi:include href="oxf:/apps/VuDL/model/helpers/FedoraAPI-helper.xml"/>
    <xi:include href="oxf:/apps/VuDL/model/helpers/Fits-helper.xml"/>
    
    <!-- Include Home, Object, Search, etc-->
    <xi:include href="input:page-model"/>
    
    <!-- TODO: These are only needed for testing 
    <xi:include href="input:all-groups"/>
    <xi:include href="input:user-group"/>
    <xi:include href="input:ViewTypes"/>
    <xi:include href="input:currentPage"/>
    -->

    

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <xhtml:script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></xhtml:script>
    <![endif]-->

    <xhtml:title>
        <xforms:output value="xxforms:instance('pageTitle')"/>
    </xhtml:title>
    
  </xhtml:head>

  <xhtml:body>

    <xhtml:div class="navbar navbar-inverse navbar-fixed-top">
      <xhtml:div class="navbar-inner">
        <xhtml:div class="container-fluid">
          
          <!--
          <xhtml:a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <xhtml:span class="icon-bar"></xhtml:span>
            <xhtml:span class="icon-bar"></xhtml:span>
            <xhtml:span class="icon-bar"></xhtml:span>
          </xhtml:a>
          -->
          
          <xhtml:a class="brand" href="#">
              <xhtml:img src="/apps/VuDL/images/vudl-logo.png" alt=""/>
          </xhtml:a>
          
          <!-- <xhtml:div class="nav-collapse collapse"> -->
          <xhtml:div>
            
            <xhtml:ul class="nav">
              <xhtml:li class="dropdown">
                <xhtml:a href="#" class="dropdown-toggle" data-toggle="dropdown">Tools <xhtml:b class="caret"></xhtml:b></xhtml:a>
                <xhtml:ul class="dropdown-menu">
                
                  <!-- TODO: this works, but the stlye li:hover is broken -->
                  <!--
                  <xhtml:li>
                    <xforms:trigger appearance="minimal">
                        <xforms:label>Search</xforms:label>
                        <xforms:action ev:event="DOMActivate">
                            <xforms:dispatch name="launch-find-object" target="CoreModel-helper"/>
                        </xforms:action>
                    </xforms:trigger>
                  </xhtml:li>
                  -->
                  
                  <xi:include href="input:home-button"/>
                  <xi:include href="input:sitemap-button"/>
                  <xi:include href="input:search-button"/>
                  <xi:include href="input:visualizations-button"/>
                  <xhtml:li class="divider"></xhtml:li>
                  <xi:include href="input:audit-button"/>
                  <xi:include href="input:settings-button"/>
                  <xi:include href="input:users-button"/>
                </xhtml:ul>
              </xhtml:li>
            </xhtml:ul>
            
            <xhtml:div class="nav-search pull-right">
                <xforms:trigger>
                    <xforms:label>Search</xforms:label>
                    <xforms:action ev:event="DOMActivate">
                        <xforms:dispatch name="launch-find-object" target="CoreModel-helper"/>
                    </xforms:action>
                </xforms:trigger>
            </xhtml:div>
            
            <xhtml:p class="navbar-text pull-right">
              Logged in as <xhtml:a href="#" class="navbar-link"><xforms:output value="xxforms:instance('user-credentials')//username"/></xhtml:a>
            </xhtml:p>

            
            
          </xhtml:div><!--/.nav-collapse -->
          
        </xhtml:div>
      </xhtml:div>
    </xhtml:div>

    <xhtml:div class="container-fluid">

        <xi:include href="input:page-view"/>

    </xhtml:div><!--/.fluid-container-->

    <!-- Search -->
    <xi:include href="oxf:/apps/VuDL/view/dialogs/find-object.xml" xxi:omit-xml-base="true"/>
    
    <!-- Debugger -->
    <xforms:group model="config-model" ref=".[xxforms:instance('config-instance')//debug-level = '1']">
        <fr:xforms-inspector xmlns:fr="http://orbeon.org/oxf/xml/form-runner"/>
    </xforms:group>
    
    
  </xhtml:body>
  <xhtml:script src="/fr/style/bootstrap/js/bootstrap.js"></xhtml:script>
</xhtml:html>
